# ============================================================================
# Curatore v2 - Service Configuration (generated by bootstrap)
# ============================================================================
# This file was generated from scripts/templates/config.yml.template.
# To regenerate: ./scripts/generate-env.sh
#
# Manual edits are preserved until the next generate-env.sh run.
# ============================================================================

version: "2.0"

# ============================================================================
# Authentication
# ============================================================================
enable_auth: true

# ============================================================================
# LLM Configuration
# ============================================================================
llm:
  provider: openai
  api_key: __OPENAI_API_KEY__
  base_url: __OPENAI_BASE_URL__
  timeout: 60
  max_retries: 3
  verify_ssl: true

  default_model: __OPENAI_MODEL__

  task_types:
    embedding:
      model: text-embedding-3-large
      dimensions: 1536

    quick:
      model: __OPENAI_MODEL__
      temperature: 0.1

    standard:
      model: __OPENAI_MODEL__
      temperature: 0.5

    quality:
      model: __OPENAI_MODEL__
      temperature: 0.3

    bulk:
      model: __OPENAI_MODEL__
      temperature: 0.3

    reasoning:
      model: __OPENAI_MODEL__
      temperature: 0.2

# ============================================================================
# Extraction Engine Configuration
# ============================================================================
extraction:
  default_engine: document-service

  engines:
    - name: document-service
      display_name: "Document Service (Docker)"
      description: "Curatore Document Service running on curatore-network"
      engine_type: document-service
      service_url: http://document-service:8010
      timeout: 240
      enabled: true
      verify_ssl: true
      api_key: __DOCUMENT_SERVICE_API_KEY__

# ============================================================================
# Playwright Rendering Service Configuration
# ============================================================================
playwright:
  enabled: true
  service_url: http://playwright:8011
  api_key: __PLAYWRIGHT_API_KEY__
  timeout: 60
  max_retries: 3
  browser_pool_size: 3
  default_viewport_width: 1920
  default_viewport_height: 1080
  default_timeout_ms: 30000
  default_wait_timeout_ms: 5000
  document_extensions:
    - ".pdf"
    - ".docx"
    - ".doc"
    - ".xlsx"
    - ".xls"
    - ".pptx"
    - ".ppt"

# ============================================================================
# MCP Gateway Service Configuration
# ============================================================================
mcp:
  enabled: true
  service_url: http://mcp:8020
  timeout: 30

# ============================================================================
# Microsoft Graph API Configuration
# ============================================================================
microsoft_graph:
  enabled: __MS_GRAPH_ENABLED__
  tenant_id: __MS_TENANT_ID__
  client_id: __MS_CLIENT_ID__
  client_secret: __MS_CLIENT_SECRET__
  graph_scope: https://graph.microsoft.com/.default
  graph_base_url: https://graph.microsoft.com/v1.0
  enable_email: false

# ============================================================================
# Queue Configuration
# ============================================================================
queue:
  broker_url: redis://redis:6379/0
  result_backend: redis://redis:6379/1
  default_queue: processing
  worker_concurrency: 4
  task_timeout: 3600

# ============================================================================
# Queue Type Settings
# ============================================================================
queues:
  extraction:
    max_concurrent: 7
    timeout_seconds: 300

# ============================================================================
# MinIO / S3 Object Storage Configuration
# ============================================================================
minio:
  enabled: true
  endpoint: minio:9000
  access_key: __MINIO_ACCESS_KEY__
  secret_key: __MINIO_SECRET_KEY__
  secure: false
  bucket_uploads: curatore-uploads
  bucket_processed: curatore-processed
  bucket_temp: curatore-temp
  presigned_expiry: 3600

# ============================================================================
# Search Configuration (PostgreSQL + pgvector)
# ============================================================================
search:
  enabled: true
  default_mode: hybrid
  semantic_weight: 0.5
  batch_size: 50
  max_content_length: 100000
  chunk_size: 1500
  chunk_overlap: 200
